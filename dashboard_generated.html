<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STAGE Performance Dashboard - Gujarati Market</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; }
        .header { background: white; padding: 30px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header h1 { color: #2563eb; font-size: 28px; margin-bottom: 10px; }
        .header p { color: #666; }

        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .metric-card { background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-left: 4px solid #2563eb; }
        .metric-label { font-size: 14px; color: #666; margin-bottom: 8px; font-weight: 500; }
        .metric-value { font-size: 32px; font-weight: 700; color: #111; margin-bottom: 5px; }
        .metric-status { font-size: 13px; font-weight: 600; }
        .metric-status.healthy { color: #10b981; }
        .metric-status.unhealthy { color: #ef4444; }

        .shows-table { background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .shows-table h2 { font-size: 20px; margin-bottom: 20px; color: #111; }
        table { width: 100%; border-collapse: collapse; }
        th { background: #f3f4f6; padding: 12px; text-align: left; font-weight: 600; font-size: 13px; color: #374151; border-bottom: 2px solid #e5e7eb; }
        td { padding: 12px; border-bottom: 1px solid #e5e7eb; font-size: 14px; }
        tr:hover { background: #f9fafb; }
        .channel-badge { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; text-transform: uppercase; }
        .channel-meta { background: #dbeafe; color: #1e40af; }
        .channel-google { background: #d1fae5; color: #065f46; }
        .platform-app { color: #7c3aed; }
        .platform-web { color: #ea580c; }

        .success { background: #f0fdf4; color: #15803d; padding: 20px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #22c55e; }
        .success strong { font-size: 16px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ“Š STAGE Performance Dashboard</h1>
            <p>Gujarati Market â€¢ Performance Marketing Analytics â€¢ Data Pre-Loaded âœ…</p>
        </div>

        <div class="success">
            <strong>âœ… Dashboard Generated Successfully!</strong><br>
            All CSV files have been processed and data is embedded in this page.<br>
            <strong>No file upload needed</strong> - just open this file in your browser anytime!
        </div>

        <div class="metrics-grid" id="metricsGrid"></div>

        <div class="shows-table">
            <h2>ðŸ“ˆ Show Performance</h2>
            <table id="showsTable">
                <thead>
                    <tr>
                        <th>Show</th>
                        <th>Channel</th>
                        <th>Platform</th>
                        <th>Spend (â‚¹)</th>
                        <th>Trials</th>
                        <th>CAC (â‚¹)</th>
                        <th>IR%</th>
                        <th>TR%</th>
                        <th>TCR%</th>
                        <th>CTR%</th>
                    </tr>
                </thead>
                <tbody id="showsTableBody"></tbody>
            </table>
        </div>
    </div>

    <script>
        // EMBEDDED DATA - Generated from your CSV files
        const DATA = [
        {
                "show": "Saanwari",
                "channel": "meta",
                "platform": "app",
                "spend": 1007212.0,
                "trials": 3555,
                "cac": 283.0,
                "ir": 13.14,
                "tr": 25.02,
                "tcr": 32.04,
                "ctr": 0.55
        },
        {
                "show": "31st",
                "channel": "meta",
                "platform": "app",
                "spend": 593574.0,
                "trials": 2362,
                "cac": 251.0,
                "ir": 21.13,
                "tr": 28.43,
                "tcr": 31.51,
                "ctr": 0.45
        },
        {
                "show": "JholaChhap",
                "channel": "meta",
                "platform": "app",
                "spend": 106186.0,
                "trials": 219,
                "cac": 485.0,
                "ir": 6.82,
                "tr": 28.82,
                "tcr": 38.27,
                "ctr": 0.62
        },
        {
                "show": "Minzar",
                "channel": "meta",
                "platform": "app",
                "spend": 88201.0,
                "trials": 209,
                "cac": 422.0,
                "ir": 18.76,
                "tr": 15.71,
                "tcr": 29.61,
                "ctr": 0.71
        },
        {
                "show": "BuilderBoys",
                "channel": "meta",
                "platform": "app",
                "spend": 60660.0,
                "trials": 121,
                "cac": 501.0,
                "ir": 21.33,
                "tr": 14.94,
                "tcr": 35.24,
                "ctr": 0.38
        },
        {
                "show": "Punarjanam",
                "channel": "meta",
                "platform": "app",
                "spend": 19225.0,
                "trials": 33,
                "cac": 583.0,
                "ir": 6.32,
                "tr": 28.7,
                "tcr": 31.03,
                "ctr": 0.93
        },
        {
                "show": "BewafaDarling",
                "channel": "meta",
                "platform": "app",
                "spend": 6725.0,
                "trials": 2,
                "cac": 3363.0,
                "ir": 1.68,
                "tr": 15.38,
                "tcr": 0.0,
                "ctr": 1.87
        },
        {
                "show": "VideshiBahu",
                "channel": "meta",
                "platform": "app",
                "spend": 4311.0,
                "trials": 7,
                "cac": 616.0,
                "ir": 10.33,
                "tr": 20.59,
                "tcr": 0.0,
                "ctr": 0.49
        },
        {
                "show": "Akshar",
                "channel": "meta",
                "platform": "app",
                "spend": 3874.0,
                "trials": 6,
                "cac": 646.0,
                "ir": 14.87,
                "tr": 15.0,
                "tcr": 66.67,
                "ctr": 0.24
        },
        {
                "show": "Saanwari",
                "channel": "meta",
                "platform": "app",
                "spend": 115300.0,
                "trials": 784,
                "cac": 147.0,
                "ir": 24.53,
                "tr": 31.95,
                "tcr": 37.32,
                "ctr": 0.44
        },
        {
                "show": "31st",
                "channel": "meta",
                "platform": "app",
                "spend": 29021.0,
                "trials": 241,
                "cac": 120.0,
                "ir": 30.84,
                "tr": 32.61,
                "tcr": 34.6,
                "ctr": 0.81
        },
        {
                "show": "Akshar",
                "channel": "meta",
                "platform": "app",
                "spend": 22074.0,
                "trials": 30,
                "cac": 736.0,
                "ir": 11.81,
                "tr": 19.23,
                "tcr": 61.54,
                "ctr": 0.42
        },
        {
                "show": "JholaChhap",
                "channel": "meta",
                "platform": "app",
                "spend": 11520.0,
                "trials": 32,
                "cac": 360.0,
                "ir": 9.71,
                "tr": 39.51,
                "tcr": 28.57,
                "ctr": 0.68
        },
        {
                "show": "Minzar",
                "channel": "meta",
                "platform": "app",
                "spend": 6981.0,
                "trials": 13,
                "cac": 537.0,
                "ir": 19.26,
                "tr": 27.66,
                "tcr": 44.44,
                "ctr": 0.32
        },
        {
                "show": "BuilderBoys",
                "channel": "meta",
                "platform": "app",
                "spend": 6013.0,
                "trials": 13,
                "cac": 463.0,
                "ir": 28.34,
                "tr": 18.57,
                "tcr": 20.0,
                "ctr": 0.56
        },
        {
                "show": "Saanwari",
                "channel": "meta",
                "platform": "app",
                "spend": 36545.0,
                "trials": 151,
                "cac": 242.0,
                "ir": 13.78,
                "tr": 32.06,
                "tcr": 32.58,
                "ctr": 0.61
        },
        {
                "show": "Saanwari",
                "channel": "meta",
                "platform": "app",
                "spend": 8485.0,
                "trials": 36,
                "cac": 236.0,
                "ir": 12.52,
                "tr": 53.73,
                "tcr": 31.25,
                "ctr": 0.64
        },
        {
                "show": "Saanwari",
                "channel": "meta",
                "platform": "web",
                "spend": 151438.0,
                "trials": 640,
                "cac": 237.0,
                "ir": 0,
                "tr": 0,
                "tcr": 39.34,
                "ctr": 0.94
        },
        {
                "show": "Saanwari",
                "channel": "google",
                "platform": "app",
                "spend": 380219.0,
                "trials": 974,
                "cac": 390.0,
                "ir": 6.21,
                "tr": 14.71,
                "tcr": 30.64,
                "ctr": 1.6
        },
        {
                "show": "Minzar",
                "channel": "google",
                "platform": "app",
                "spend": 30716.0,
                "trials": 44,
                "cac": 698.0,
                "ir": 4.41,
                "tr": 16.54,
                "tcr": 29.55,
                "ctr": 1.6
        },
        {
                "show": "BuilderBoys",
                "channel": "google",
                "platform": "app",
                "spend": 7931.0,
                "trials": 25,
                "cac": 317.0,
                "ir": 12.2,
                "tr": 16.23,
                "tcr": 28.0,
                "ctr": 1.39
        },
        {
                "show": "bewafadarling",
                "channel": "google",
                "platform": "app",
                "spend": 6869.0,
                "trials": 2,
                "cac": 2290.0,
                "ir": 5.06,
                "tr": 9.09,
                "tcr": 66.67,
                "ctr": 0.56
        },
        {
                "show": "punarjanam",
                "channel": "google",
                "platform": "app",
                "spend": 1792.0,
                "trials": 4,
                "cac": 448.0,
                "ir": 11.58,
                "tr": 11.11,
                "tcr": 0.0,
                "ctr": 1.34
        },
        {
                "show": "videshibahu",
                "channel": "google",
                "platform": "app",
                "spend": 1277.0,
                "trials": 5,
                "cac": 255.0,
                "ir": 9.35,
                "tr": 19.23,
                "tcr": 20.0,
                "ctr": 1.11
        },
        {
                "show": "GJ31st",
                "channel": "google",
                "platform": "app",
                "spend": 1165.0,
                "trials": 1,
                "cac": 1165.0,
                "ir": 10.93,
                "tr": 5.0,
                "tcr": 0.0,
                "ctr": 1.13
        },
        {
                "show": "jholachhap",
                "channel": "google",
                "platform": "app",
                "spend": 1103.0,
                "trials": 2,
                "cac": 551.0,
                "ir": 6.41,
                "tr": 20.0,
                "tcr": 50.0,
                "ctr": 1.31
        },
        {
                "show": "Saanwari",
                "channel": "google",
                "platform": "app",
                "spend": 10250.0,
                "trials": 40,
                "cac": 256.0,
                "ir": 22.59,
                "tr": 10.47,
                "tcr": 30.0,
                "ctr": 0.94
        }
];

        // Calculate overall metrics
        function calculateMetrics(data) {
            const totalSpend = data.reduce((sum, row) => sum + row.spend, 0);
            const totalTrials = data.reduce((sum, row) => sum + row.trials, 0);
            const avgCAC = totalTrials > 0 ? (totalSpend / totalTrials) : 0;

            // Weighted averages for percentages
            const totalIR = data.reduce((sum, row) => sum + (row.ir * row.trials), 0);
            const totalTR = data.reduce((sum, row) => sum + (row.tr * row.trials), 0);
            const totalTCR = data.reduce((sum, row) => sum + (row.tcr * row.trials), 0);
            const totalCTR = data.reduce((sum, row) => sum + (row.ctr * row.spend), 0);

            const avgIR = totalTrials > 0 ? (totalIR / totalTrials) : 0;
            const avgTR = totalTrials > 0 ? (totalTR / totalTrials) : 0;
            const avgTCR = totalTrials > 0 ? (totalTCR / totalTrials) : 0;
            const avgCTR = totalSpend > 0 ? (totalCTR / totalSpend) : 0;

            return {
                totalSpend: totalSpend.toFixed(0),
                totalTrials,
                cac: avgCAC.toFixed(2),
                ir: avgIR.toFixed(2),
                tr: avgTR.toFixed(2),
                tcr: avgTCR.toFixed(2),
                ctr: avgCTR.toFixed(2)
            };
        }

        function formatCurrency(num) {
            return 'â‚¹' + parseFloat(num).toLocaleString('en-IN');
        }

        function renderMetrics() {
            const metrics = calculateMetrics(DATA);
            const grid = document.getElementById('metricsGrid');

            const cards = [
                { label: 'Total Spend', value: formatCurrency(metrics.totalSpend), status: '' },
                { label: 'Total Trials', value: metrics.totalTrials.toLocaleString(), status: '' },
                { label: 'Average CAC', value: formatCurrency(metrics.cac), status: metrics.cac < 250 ? 'Healthy âœ…' : 'Needs Attention âš ï¸', healthy: metrics.cac < 250 },
                { label: 'CTR', value: metrics.ctr + '%', status: metrics.ctr > 0.75 ? 'Healthy âœ…' : 'Needs Attention âš ï¸', healthy: metrics.ctr > 0.75 },
                { label: 'Install Rate (IR)', value: metrics.ir + '%', status: metrics.ir >= 10 ? 'Healthy âœ…' : 'Needs Attention âš ï¸', healthy: metrics.ir >= 10 },
                { label: 'Trial Rate (TR)', value: metrics.tr + '%', status: metrics.tr >= 20 ? 'Healthy âœ…' : 'Needs Attention âš ï¸', healthy: metrics.tr >= 20 },
                { label: 'D0 TCR', value: metrics.tcr + '%', status: metrics.tcr < 30 ? 'Healthy âœ…' : 'Needs Attention âš ï¸', healthy: metrics.tcr < 30 }
            ];

            grid.innerHTML = cards.map(card => `
                <div class="metric-card">
                    <div class="metric-label">${card.label}</div>
                    <div class="metric-value">${card.value}</div>
                    ${card.status ? `<div class="metric-status ${card.healthy ? 'healthy' : 'unhealthy'}">${card.status}</div>` : ''}
                </div>
            `).join('');
        }

        function renderTable() {
            const tbody = document.getElementById('showsTableBody');

            // Sort by trials descending
            const sortedData = [...DATA].sort((a, b) => b.trials - a.trials);

            tbody.innerHTML = sortedData.map(row => `
                <tr>
                    <td><strong>${row.show}</strong></td>
                    <td><span class="channel-badge channel-${row.channel}">${row.channel}</span></td>
                    <td><span class="platform-${row.platform}">${row.platform}</span></td>
                    <td>${formatCurrency(row.spend)}</td>
                    <td>${row.trials.toLocaleString()}</td>
                    <td>${formatCurrency(row.cac)}</td>
                    <td>${row.ir}%</td>
                    <td>${row.tr}%</td>
                    <td>${row.tcr}%</td>
                    <td>${row.ctr}%</td>
                </tr>
            `).join('');
        }

        // Initialize dashboard
        renderMetrics();
        renderTable();

        console.log('âœ… Dashboard loaded with', DATA.length, 'shows');
    </script>
</body>
</html>